{"version":3,"file":"WebStats-dist.js","sources":["src/Connection.ts","src/Data.ts","node_modules/@itsjavi/jsx-runtime/dist/jsx-runtime.modern.js","src/FormattingCodes.tsx","src/Units.ts","src/Table.tsx","src/Display.tsx","src/Pagination.tsx","src/WebStats.ts"],"sourcesContent":["export default class Connection {\r\n\tall: string\r\n\tscores: string\r\n\tonline: string\r\n\ttables: string\r\n\tserverIcon: string\r\n\r\n\tconstructor({ all, scores, online, tables, serverIcon }) {\r\n\t\tthis.all = all\r\n\t\tthis.scores = scores\r\n\t\tthis.online = online\r\n\t\tthis.tables = tables\r\n\t\tthis.serverIcon = serverIcon\r\n\t}\r\n\r\n\tstatic json(host: string) {\r\n\t\t// Detect if the user has manually entered a protocol (could be https)\r\n\t\tconst protocol = host.startsWith(\"http\") ? \"\" : \"http://\"\r\n\t\treturn new Connection({\r\n\t\t\tall:    `${protocol}${host}/stats.json`,\r\n\t\t\tscores: `${protocol}${host}/scoreboard.json`,\r\n\t\t\tonline: `${protocol}${host}/online.json`,\r\n\t\t\ttables: `${protocol}${host}/tables.json`,\r\n\t\t\tserverIcon: `${protocol}${host}/server-icon.png`,\r\n\t\t})\r\n\t}\r\n\r\n\tgetStats = async () => {\r\n\t\tif (this.all) {\r\n\t\t\treturn await (await fetch(this.all)).json()\r\n\t\t} else {\r\n\t\t\tconst [online, scoreboard] = await Promise.all([this.getOnline(), this.getScoreboard()])\r\n\t\t\treturn { online, scoreboard }\r\n\t\t}\r\n\t}\r\n\tgetScoreboard = () => fetch(this.scores).then(response => response.json()).catch(() => {})\r\n\tgetOnline = () => fetch(this.online).then(response => response.json()).catch(() => {})\r\n\tgetTables = () => fetch(this.tables).then(response => response.json()).catch(() => {})\r\n}\r\n","export type PlayerStatus = \"online\" | \"afk\" | \"offline\"\r\ntype Scoreboard = {\r\n\tentries: string[]\r\n\tscores: { [column: string]: { [entry: string]: string } }\r\n\tcolumns?: string[]\r\n}\r\ntype Online = { [player: string]: boolean | PlayerStatus }\r\ntype Entry = [number, string, ...(string)[]]\r\n\r\nexport default class Data {\r\n\tstatic BEDROCK_PREFIX = \".\"\r\n\r\n\tscoreboard: Scoreboard\r\n\tcolumns: string[]\r\n\tscores: Entry[]\r\n\tplayers: Online\r\n\tcolumns_: { [column: string]: number }\r\n\tunits: { [column: string]: string }\r\n\tskins: { [player: string]: string }\r\n\tplayernames: string[]\r\n\r\n\tconstructor(data: { scoreboard: Scoreboard, online: Online, playernames: string[] }) {\r\n\t\tthis.setStats(data)\r\n\t}\r\n\r\n\tget entries() { return this.scoreboard.entries }\r\n\tget online() { return this.players }\r\n\tget nOnline() { return Object.keys(this.players).length }\r\n\r\n\tisOnline = (player: string) => this.players[player] === true || this.players[player] === \"online\" || player == \"#server\"\r\n\tisAFK = (player: string) => this.players[player] === \"afk\"\r\n\tisOffline = (player: string) => !!this.players[player]\r\n\tgetStatus = (player: string): PlayerStatus => this.isOnline(player) ? \"online\"\r\n\t\t: (this.isAFK(player) ? \"afk\" : \"offline\")\r\n\tisCurrentPlayer = (player: string) => this.playernames?.includes(player) ?? false\r\n\r\n\tsetScoreboard(scoreboard: Scoreboard) {\r\n\t\tthis.scoreboard = scoreboard\r\n\t\tthis.columns = Object.keys(scoreboard.scores).sort()\r\n\r\n\t\tthis.filter()\r\n\r\n\t\tthis.scores = []\r\n\t\tfor (const entryName of this.entries) {\r\n\t\t\tconst entry = []\r\n\t\t\tentry.push(this.scores.push(entry as Entry) - 1)\r\n\t\t\tentry.push(entryName)\r\n\t\t\tfor (const columnName of this.columns) {\r\n\t\t\t\tentry.push(this.scoreboard.scores[columnName]?.[entryName] ?? \"\")\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Reverse-map column names to indices\r\n\t\t// (index 0 contains the original index, before sorting)\r\n\t\tthis.columns_ = { Player: 1 }\r\n\t\tthis.columns.forEach((val, idx) => this.columns_[val] = idx + 2)\r\n\t}\r\n\tsetOnlineStatus(online: Online) { this.players = online }\r\n\tsetPlayernames(playernames: string[]) { this.playernames = playernames }\r\n\tsetUnits(units: { [column: string]: string }) { this.units = units }\r\n\tsetSkins(skins: { [player: string]: string }) { this.skins = skins }\r\n\tsetStats(data: { scoreboard: Scoreboard, online: Online, playernames: string[], units?: { [column: string]: string }, skins?: { [player: string]: string } }) {\r\n\t\tthis.setScoreboard(data.scoreboard)\r\n\t\tthis.setOnlineStatus(data.online)\r\n\t\tthis.setPlayernames(data.playernames)\r\n\t\tthis.setUnits(data.units ?? {})\r\n\t\tthis.setSkins(data.skins ?? {})\r\n\t}\r\n\r\n\tfilter() {\r\n\t\t// Remove non-player / empty entries and sort\r\n\t\tthis.scoreboard.entries = this.scoreboard.entries\r\n\t\t\t.filter(Data.isPlayerOrServer)\r\n\t\t\t.filter(this.isNonemptyEntry.bind(this))\r\n\t\t\t.sort(Intl.Collator().compare)\r\n\r\n\t\t// Remove empty columns\r\n\t\tthis.scoreboard.scores = Data.filter(this.scoreboard.scores, Data.isNonemptyObjective)\r\n\t}\r\n\r\n\tsort(by: string, descending: boolean) {\r\n\t\t// Pre-create collator for significant performance improvement\r\n\t\t// over `a.localeCompare(b, undefined, {sensitivity: \"base\"})`\r\n\t\t// funny / weird thing: for localeCompare, supplying an empty `options`\r\n\t\t// object is way slower than supplying nothing...\r\n\t\tconst collator = new Intl.Collator(undefined, { sensitivity: \"base\", numeric: true })\r\n\r\n\t\t// Case-insensitive compare as numbers or strings\r\n\t\tthis.scores = this.scores.sort((a_row, b_row) =>\r\n\t\t\t(descending ? -1 : 1) * collator.compare(a_row[this.columns_[by]] as string, b_row[this.columns_[by]] as string))\r\n\t}\r\n\r\n\t// Ignore all entries which have no scores (armour stand book fix)\r\n\t// (also hides entries with only 0 values)\r\n\tisNonemptyEntry = (entry: string) => Object.entries(this.scoreboard.scores)\r\n\t\t.filter(([_, score]) => score[entry] && score[entry] != \"0\").length > 0\r\n\r\n\t// Valid player names only contain between 3 and 16 characters [A-Za-z0-9_],\r\n\t// entries with only digits are ignored as well (common for datapacks)\r\n\tstatic isPlayerOrServer = (entry: string) =>\r\n\t\tentry == \"#server\" || (entry.match(/^\\w{3,16}$/) && !entry.match(/^\\d*$/))\r\n\t\t|| Data.isBedrockPlayer(entry)\r\n\r\n\t// Whether this entry is a Bedrock player through Geyser/Floodgate\r\n\tstatic isBedrockPlayer = (entry: string) => entry.startsWith(Data.BEDROCK_PREFIX)\r\n\r\n\t// Whether any entry has a value for this objective\r\n\tstatic isNonemptyObjective = (objective: { [entry: string]: string | number }) =>\r\n\t\tObject.keys(objective).filter(Data.isPlayerOrServer).length > 0\r\n\r\n\t// Transform a Bedrock player's name mangled by Geyser/Floodgate back to a real name\r\n\tstatic transformBedrockPlayername = (entry: string) =>\r\n\t\tentry.substring(1).replaceAll(\"_\", \" \")\r\n\r\n\t// Array-like filter function for objects\r\n\t// https://stackoverflow.com/a/37616104\r\n\tstatic filter = <V>(obj: { [k: string]: V }, predicate: (_: V) => boolean): { [k: string]: V } =>\r\n\t\tObject.fromEntries(Object.entries(obj).filter(([_, v]) => predicate(v)))\r\n\r\n\t// Likewise, array-like map function for objects\r\n\tstatic map = <V>(obj: { [k: string]: V }, mapper: (k: string, v: V) => V) =>\r\n\t\tObject.fromEntries(Object.entries(obj).map(([k, v]) => [k, mapper(k, v)]))\r\n\r\n}\r\n","function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const t=[\"children\"],n=\"jsx.Fragment\";function r(n,r){if(\"function\"==typeof n)return void 0!==n.prototype?new n(r):n(r);const{children:o=[]}=r;return{type:n,key:null,props:e({},function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)t.indexOf(n=l[r])>=0||(o[n]=e[n]);return o}(r,t),{children:Array().concat(o).map(e=>\"object\"==typeof e?e:{type:\"jsx.Text\",key:null,props:{text:e,children:[]}})})}}r.Fragment=\"jsx.Fragment\",r.TextNode=\"jsx.Text\",r.customAttributes=[\"children\",\"key\",\"props\"];const o=e=>!r.customAttributes.includes(e);class l{constructor(e){this.element=null,this.props=void 0,this.props=e}render(){return null}}\"undefined\"!=typeof window&&(r._globalThis=window),r.setGlobalThis=e=>{r._globalThis=e},r.renderDOM=(e,t=null,n=null,s=!1)=>{const i=e instanceof l;let c=i?e.render():e;i&&(n=e);const a=null===t?r._globalThis.document:t.ownerDocument;if(c.type===r.TextNode){void 0===c.props.text&&(c.props.text=\"\");const e=a.createTextNode(c.props.text);return null!==t&&t.appendChild(e),e}const u=c.type===r.Fragment?a.createDocumentFragment():a.createElement(c.type);u.jsxComponent=n;const p=c.props,d=Object.keys(p);void 0!==p.className&&Array.isArray(p.className)&&(p.className=p.className.join(\" \")),d.filter(o).forEach(e=>{let t=p[e];null!==n&&t instanceof Function&&(t=t.bind(n),t instanceof Function&&t(null)),e.startsWith(\"data-\")&&u.setAttribute(e,t),u[e]=t,u[e.toLowerCase()]=t}),Array.isArray(c.props.children)&&c.props.children.forEach(e=>r.renderDOM(e,u,n));let h=null;return i&&null!==n&&(h=n.element,n.element=u),i&&null!==n&&void 0!==n.onWillMount&&n.onWillMount(h),null!==t&&(s?t.replaceChildren(u):t.appendChild(u)),i&&null!==n&&void 0!==n.onDidMount&&n.onDidMount(h),u};const s=(e,t=null,n=null)=>r.renderDOM(e,t,n,!0);export{l as Component,n as Fragment,r as jsx,r as jsxs,s as render};\n//# sourceMappingURL=jsx-runtime.modern.js.map\n","type ColourCode =\r\n\t| \"§0\"\r\n\t| \"§1\"\r\n\t| \"§2\"\r\n\t| \"§3\"\r\n\t| \"§4\"\r\n\t| \"§5\"\r\n\t| \"§6\"\r\n\t| \"§7\"\r\n\t| \"§8\"\r\n\t| \"§9\"\r\n\t| \"§a\"\r\n\t| \"§b\"\r\n\t| \"§c\"\r\n\t| \"§d\"\r\n\t| \"§e\"\r\n\t| \"§f\"\r\n\r\ntype FormattingCode =\r\n\t| \"§k\"\r\n\t| \"§l\"\r\n\t| \"§m\"\r\n\t| \"§n\"\r\n\t| \"§o\"\r\n\t| \"§r\"\r\n\r\ntype FormattingCodePart = {\r\n\ttext: string\r\n\tformat?: FormattingCode\r\n\tcolour?: ColourCode | string\r\n\tcolourType?: \"simple\" | \"hex\"\r\n}\r\n\r\nconst COLOUR_CODES: {[code in ColourCode]: string} = {\r\n\t[\"§0\"]: \"black\",\r\n\t[\"§1\"]: \"dark_blue\",\r\n\t[\"§2\"]: \"dark_green\",\r\n\t[\"§3\"]: \"dark_aqua\",\r\n\t[\"§4\"]: \"dark_red\",\r\n\t[\"§5\"]: \"dark_purple\",\r\n\t[\"§6\"]: \"gold\",\r\n\t[\"§7\"]: \"gray\",\r\n\t[\"§8\"]: \"dark_gray\",\r\n\t[\"§9\"]: \"blue\",\r\n\t[\"§a\"]: \"green\",\r\n\t[\"§b\"]: \"aqua\",\r\n\t[\"§c\"]: \"red\",\r\n\t[\"§d\"]: \"light_purple\",\r\n\t[\"§e\"]: \"yellow\",\r\n\t[\"§f\"]: \"white\",\r\n}\r\n\r\nconst FORMATTING_CODES: {[code in FormattingCode]: string} = {\r\n\t[\"§k\"]: \"obfuscated\",\r\n\t[\"§l\"]: \"bold\",\r\n\t[\"§m\"]: \"strikethrough\",\r\n\t[\"§n\"]: \"underline\",\r\n\t[\"§o\"]: \"italic\",\r\n\t[\"§r\"]: \"reset\",\r\n}\r\n\r\n// § followed by a single character, or of the form §x§r§r§g§g§b§b\r\n// (also capture rest of string, until next §)\r\nconst FORMATTING_CODE_REGEX = /(§x§.§.§.§.§.§.|§.)([^§]*)/gm\r\n\r\n// Convert a single formatting code to a <span> element\r\nfunction convertFormattingCode(part: FormattingCodePart) {\r\n\tif (!part.format && !part.colour) return part.text\r\n\tif (part.text.length == 0) return part.text\r\n\t\r\n\tconst classes = [\"mc-format\"]\r\n\tif (part.format) classes.push(`mc-${part.format}`)\r\n\tif (part.colourType == \"simple\") classes.push(`mc-${part.colour}`)\r\n\t\r\n\treturn (\r\n\t\t<span className={classes} style={part.colourType == \"hex\" && `color: ${part.colour}`}>\r\n\t\t\t{part.text}\r\n\t\t</span>\r\n\t)\r\n}\r\n\r\nfunction parseFormattingCodes(value: string): FormattingCodePart[] {\r\n\tconst parts = []\r\n\r\n\tconst firstIdx = value.matchAll(FORMATTING_CODE_REGEX).next().value?.index\r\n\tif (firstIdx == undefined || firstIdx > 0) {\r\n\t\tparts.push({ text: value.substring(0, firstIdx) })\r\n\t}\r\n\r\n\tfor (const match of value.matchAll(FORMATTING_CODE_REGEX)) {\r\n\t\tparts.push(parseFormattingCode(match[1], match[2], parts[parts.length - 1]))\r\n\t}\r\n\r\n\treturn parts\r\n}\r\n\r\nfunction parseFormattingCode(code: string, text: string, prev: FormattingCodePart): FormattingCodePart {\r\n\t// Simple colour codes and formatting codes\r\n\tif (COLOUR_CODES[code]) {\r\n\t\treturn {\r\n\t\t\ttext,\r\n\t\t\tcolour: COLOUR_CODES[code],\r\n\t\t\tcolourType: \"simple\",\r\n\t\t}\r\n\t}\r\n\tif (FORMATTING_CODES[code]) {\r\n\t\tif (FORMATTING_CODES[code] == \"reset\") return { text }\r\n\t\treturn {\r\n\t\t\ttext,\r\n\t\t\tformat: FORMATTING_CODES[code],\r\n\t\t\tcolour: prev?.colour,\r\n\t\t\tcolourType: prev?.colourType,\r\n\t\t}\r\n\t}\r\n\r\n\t// Hex colour codes\r\n\tconst matches = code.match(/§x§(.)§(.)§(.)§(.)§(.)§(.)/m)\r\n\tif (matches) {\r\n\t\treturn {\r\n\t\t\ttext,\r\n\t\t\tcolour: \"#\" + matches.slice(1).join(\"\"),\r\n\t\t\tcolourType: \"hex\",\r\n\t\t}\r\n\t}\r\n\r\n\t// Not a valid formatting code, just return the input unaltered\r\n\treturn { text }\r\n}\r\n\r\n// Replace all formatting codes by <span> elements\r\nexport const convertFormattingCodes = (value: string) =>\r\n\tparseFormattingCodes(value).map(convertFormattingCode)\r\n","const timeUnits = [\"ticks\", \"milliseconds\", \"ms\", \"seconds\", \"s\", \"minutes\", \"min\", \"hours\", \"h\", \"days\", \"d\"]\r\nconst distanceUnits = [\"blocks\", \"millimetres\", \"millimeters\", \"mm\", \"centimetres\", \"centimeters\", \"cm\", \"metres\", \"meters\", \"m\", \"kilometres\", \"kilometers\", \"km\"]\r\nconst dateUnits = [\"timestamp\", \"formatted date\"]\r\nconst itemUnits = [\"items\", \"items16\"]\r\nconst percentageUnits = [\"percent\"]\r\n\r\nconst offsets = {\r\n\tmilliseconds: 0.001,\r\n\tms: 0.001,\r\n\tticks: 0.05,\r\n\tseconds: 1,\r\n\ts: 1,\r\n\tminutes: 60,\r\n\tmin: 60,\r\n\thours: 60 * 60,\r\n\th: 60 * 60,\r\n\tdays: 24 * 60 * 60,\r\n\td: 24 * 60 * 60,\r\n\tmillimetres: 0.001,\r\n\tmillimeters: 0.001,\r\n\tmm: 0.001,\r\n\tcentimetres: 0.01,\r\n\tcentimeters: 0.01,\r\n\tcm: 0.01,\r\n\tblocks: 1,\r\n\tmetres: 1,\r\n\tmeters: 1,\r\n\tm: 1,\r\n\tkilometres: 1000,\r\n\tkilometers: 1000,\r\n\tkm: 1000,\r\n\titems: 1,\r\n\titems16: 1,\r\n\tpercent: 1,\r\n}\r\n\r\nfunction convertTimeUnit(source: number, unit: string): string {\r\n\tif (source == 0) return \"0\"\r\n\r\n\tconst inSeconds = source * offsets[unit]\r\n\r\n\tconst date = new Date(inSeconds * 1000)\r\n\tconst d = Math.floor(inSeconds / offsets.days)\r\n\tconst h = date.getUTCHours()\r\n\tconst m = date.getUTCMinutes()\r\n\tconst s = date.getUTCSeconds() + date.getUTCMilliseconds() / 1000\r\n\r\n\tif (h > 0 || d > 0) {\r\n\t\treturn `${h + d*24}:${String(m).padStart(2, \"0\")} h`\r\n\t} else if (m > 0) {\r\n\t\treturn `${m}:${String(Math.floor(s)).padStart(2, \"0\")}`\r\n\t} else {\r\n\t\treturn `${s} s`\r\n\t}\r\n}\r\n\r\nfunction convertDistanceUnit(source: number, unit: string): string {\r\n\tif (source == 0) return \"0\"\r\n\r\n\tconst inBlocks = source * offsets[unit]\r\n\r\n\tif (inBlocks < offsets.cm) {\r\n\t\treturn Math.floor(inBlocks / offsets.mm) + \" mm\"\r\n\t} else if (inBlocks < offsets.m) {\r\n\t\treturn Math.floor(inBlocks / offsets.cm) + \" cm\"\r\n\t} else if (inBlocks < offsets.km) {\r\n\t\treturn Math.floor(inBlocks) + \" m\"\r\n\t} else {\r\n\t\treturn Math.floor(inBlocks / offsets.km) + \" km\"\r\n\t}\r\n}\r\n\r\nfunction convertDateUnit(source: string, unit: string): string {\r\n\tconst asTimestamp = (unit == \"timestamp\") ? new Date(Number(source)) : new Date(source)\r\n\r\n\treturn asTimestamp.toLocaleString()\r\n}\r\n\r\nfunction convertItemUnit(source: number, unit: string): string {\r\n\tif (source == 0) return \"0\"\r\n\r\n\tconst inItems = source\r\n\tconst stackSize = (unit == \"items16\") ? 16 : 64\r\n\r\n\tconst stacks = Math.floor(inItems / stackSize)\r\n\tconst items = inItems % stackSize\r\n\tif (stacks > 0) {\r\n\t\treturn (items > 0) ? `${stacks} st ${items}` : `${stacks} st`\r\n\t} else {\r\n\t\treturn String(items)\r\n\t}\r\n}\r\n\r\nfunction convertPercentageUnit(source: string, unit: string): string {\r\n\treturn source + \"%\"\r\n}\r\n\r\nexport function autoConvertUnits(source: string, unit: string): string {\r\n\tif (timeUnits.includes(unit)) {\r\n\t\treturn convertTimeUnit(Number(source), unit)\r\n\t} else if (distanceUnits.includes(unit)) {\r\n\t\treturn convertDistanceUnit(Number(source), unit)\r\n\t} else if (dateUnits.includes(unit)) {\r\n\t\treturn convertDateUnit(source, unit)\r\n\t} else if (itemUnits.includes(unit)) {\r\n\t\treturn convertItemUnit(Number(source), unit)\r\n\t} else if (percentageUnits.includes(unit)) {\r\n\t\treturn convertPercentageUnit(source, unit)\r\n\t} else return isNaN(source as any) ? source : Number(source).toLocaleString()\r\n}\r\n","import { Component } from \"@itsjavi/jsx-runtime\"\r\nimport Data, { PlayerStatus } from \"./Data\"\r\nimport { convertFormattingCodes } from \"./FormattingCodes\"\r\nimport { autoConvertUnits } from \"./Units\"\r\n\r\nconst CONSOLE_IMAGE = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAPElEQVQ4T2NUUlL6z0ABYBw1gGE0DBioHAZ3795lUFZWJildosQCRQaQoxnkVLgL0A2A8dFpdP8NfEICAMkiK2HeQ9JUAAAAAElFTkSuQmCC\"\r\n\r\ntype HeadingData = {\r\n\tcolumns: string[]\r\n\tshowSkins: boolean\r\n\tsortColumn: string\r\n\tsortDescending: boolean\r\n\tonClick: (e: Event) => any\r\n}\r\n\r\nconst columnClass = (column: string, sortColumn: string, sortDescending: boolean) =>\r\n\tsortColumn == column && [\"webstats-sort-column\", sortDescending ? \"descending\" : \"ascending\"]\r\n\r\nconst onKeyDown = (e: KeyboardEvent) => {\r\n\tif (e.key == \"Enter\") (e.target as HTMLElement).click()\r\n}\r\n\r\n// Transform an entry name into the name to be displayed\r\nconst transformEntryName = (entry: string) => {\r\n\tif (entry == \"#server\") return \"Server\"\r\n\telse if (Data.isBedrockPlayer(entry)) return Data.transformBedrockPlayername(entry)\r\n\telse return entry\r\n}\r\n\r\nconst getSkin = (entry: string, skin?: string) => {\r\n\tif (skin != undefined && skin.startsWith(\"http\")) {\r\n\t\treturn skin\r\n\t} else if (skin != undefined) {\r\n\t\treturn `https://www.mc-heads.net/avatar/${skin}/64.png`\r\n\t} else if (entry != \"#server\") {\r\n\t\treturn `https://www.mc-heads.net/avatar/${entry}/64.png`\r\n\t}\r\n}\r\n\r\nexport const Heading = ({ columns, showSkins, sortColumn, sortDescending, onClick }: HeadingData) => (\r\n\t<tr>\r\n\t\t<th colSpan={showSkins && 2} onClick={onClick} onKeyDown={onKeyDown} tabIndex=\"0\" data-objective=\"Player\" className={columnClass(\"Player\", sortColumn, sortDescending)}>\r\n\t\t\tPlayer\r\n\t\t</th>\r\n\t\t{...columns.map(column => <th onClick={onClick} onKeyDown={onKeyDown} tabIndex=\"0\" data-objective={column} className={columnClass(column, sortColumn, sortDescending)}>\r\n\t\t\t{column}\r\n\t\t</th>)}\r\n\t</tr>)\r\n\r\nconst Avatar = ({ entry, skin }: { entry: string, skin?: string }) => (\r\n\t<td className={[\"sticky\", \"skin\"]} title={entry}>\r\n\t\t<img title={entry} src={getSkin(entry, skin)} alt=\" \" />\r\n\t</td>\r\n)\r\n\r\nconst Cell = ({ column, value, relative, unit }: { column: string, value: string, relative?: number, unit?: string }) => {\r\n\tif (value == undefined || value == \"0\") return <td data-objective={column} className=\"empty\"></td>\r\n\tconst coloured = convertFormattingCodes(autoConvertUnits(value, unit))\r\n\treturn <td\r\n\t\tdata-objective={column}\r\n\t\tdata-value={value}\r\n\t\tdata-unit={unit}\r\n\t\ttitle={unit ? `${value} ${unit}` : value}\r\n\t\tstyle={relative && `--relative: ${relative}%;`}>\r\n\t\t{coloured}\r\n\t</td>\r\n}\r\n\r\nconst PlayerCell = ({ entry, status, name }: { entry: string, status: PlayerStatus, name?: string }) => (\r\n\t<td data-objective=\"Player\" data-value={entry} title={entry}>\r\n\t\t<div className={[\"status\", status]} title={status}></div>\r\n\t\t<>{name ? convertFormattingCodes(name) : transformEntryName(entry)}</>\r\n\t</td>\r\n)\r\n\r\ntype RowData = {\r\n\tcolumns: string[]\r\n\tunits: { [column: string]: string }\r\n\tshowSkins: boolean\r\n\tskin?: string\r\n\tentry: string\r\n\tisCurrentPlayer: boolean\r\n}\r\n\r\nexport class Row extends Component {\r\n\tvalues: Map<string, string> = new Map()\r\n\trelative: Map<string, number> = new Map()\r\n\tstatus: PlayerStatus = \"offline\"\r\n\r\n\tconstructor(public props: RowData) {\r\n\t\tsuper(props)\r\n\t}\r\n\r\n\trender = () => (\r\n\t\t<tr entry={this.props.entry} className={[this.status, this.props.isCurrentPlayer ? \"current-player\" : undefined]}>\r\n\t\t\t{this.props.showSkins ? <Avatar entry={this.props.entry} skin={this.props.skin} /> : <></>}\r\n\t\t\t<PlayerCell entry={this.props.entry} status={this.status} name={this.values.get(\"Player\")} />\r\n\t\t\t{...this.props.columns.map(column => <Cell column={column} value={this.values.get(column)} relative={this.relative.get(column)} unit={this.props.units[column]} />)}\r\n\t\t</tr>\r\n\t)\r\n}\r\n","import { ijJSX, render } from \"@itsjavi/jsx-runtime\"\r\nimport Data from \"./Data\"\r\nimport Pagination from \"./Pagination\"\r\nimport { Heading, Row } from \"./Table\"\r\nimport { TableConfig } from \"./WebStats\"\r\n\r\nexport default class Display {\r\n\ttable: HTMLTableElement\r\n\tpagination?: Pagination\r\n\tcolumns: string[]\r\n\tsortColumn: string\r\n\tdescending: boolean\r\n\tshowSkins: boolean\r\n\tserverIconURL: string\r\n\thideOffline: boolean\r\n\r\n\tdata: Data\r\n\trows: Map<string, Row>\r\n\r\n\tconstructor({ table, pagination, showSkins = true, serverIconURL }, { columns, sortColumn = \"Player\", sortDirection = \"descending\" }: TableConfig) {\r\n\t\tthis.table = table\r\n\t\tthis.pagination = pagination\r\n\t\tthis.columns = columns\r\n\t\tthis.sortColumn = sortColumn\r\n\t\tthis.descending = sortDirection == \"descending\"\r\n\t\tthis.showSkins = showSkins\r\n\t\tthis.serverIconURL = serverIconURL\r\n\t\tthis.hideOffline = false\r\n\r\n\t\tif (this.pagination) this.pagination.onPageChange = (page) => this.show()\r\n\t}\r\n\r\n\tinit(data: Data) {\r\n\t\tthis.data = data\r\n\r\n\t\t// Set pagination controls\r\n\t\tif (this.pagination) this.updatePagination()\r\n\r\n\t\t// Create rows of (empty) entries\r\n\t\tthis.rows = new Map()\r\n\t\tfor (const entry of this.getEntries()) {\r\n\t\t\tthis.rows.set(entry, new Row({\r\n\t\t\t\tcolumns: this.columns ?? this.data.columns,\r\n\t\t\t\tunits: this.data.units,\r\n\t\t\t\tshowSkins: this.showSkins,\r\n\t\t\t\tskin: (entry == \"#server\") ? this.serverIconURL : this.data.skins[entry],\r\n\t\t\t\tentry,\r\n\t\t\t\tisCurrentPlayer: this.data.isCurrentPlayer(entry)\r\n\t\t\t}))\r\n\t\t}\r\n\r\n\t\t// Fill entries\r\n\t\tthis.updateStats()\r\n\t}\r\n\r\n\tgetEntries() {\r\n\t\tconst entriesHere = this.data.entries.filter((entry: string) =>\r\n\t\t\t(this.columns ?? this.data.columns).some((column: string) =>\r\n\t\t\t\tthis.data.scoreboard.scores[column]?.[entry]\r\n\t\t\t\t&& this.data.scoreboard.scores[column][entry] != \"0\"))\r\n\r\n\t\treturn this.hideOffline\r\n\t\t\t? entriesHere.filter(entry => this.data.isOnline(entry))\r\n\t\t\t: entriesHere\r\n\t}\r\n\r\n\tgetScores() {\r\n\t\tconst scoresHere = this.data.scores.filter(row => this.rows.has(row[1]))\r\n\r\n\t\treturn this.hideOffline\r\n\t\t\t? scoresHere.filter(row => this.data.isOnline(row[1]))\r\n\t\t\t: scoresHere\r\n\t}\r\n\r\n\tupdatePagination() {\r\n\t\tthis.pagination.update(this.getEntries().length)\r\n\t}\r\n\r\n\tupdateScoreboard() {\r\n\t\tfor (const column of [\"Player\"].concat(this.columns ?? this.data.columns)) {\r\n\t\t\tif (column == \"Player\" && this.data.columns_.Player == 1) continue;\r\n\t\t\t\r\n\t\t\tlet max = 0\r\n\t\t\tlet isNumberColumn = true\r\n\r\n\t\t\tfor (const row of this.data.scores) {\r\n\t\t\t\tif (!this.rows.has(row[1])) continue\r\n\t\t\t\tlet value = row[this.data.columns_[column]] as string\r\n\t\t\t\tif (!value) continue\r\n\t\t\t\tthis.rows.get(row[1]).values.set(column, value)\r\n\r\n\t\t\t\tif (isNumberColumn && !isNaN(Number(value))) {\r\n\t\t\t\t\tmax = Math.max(max, Number(value))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tisNumberColumn = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (isNumberColumn) {\r\n\t\t\t\tfor (const row of this.data.scores) {\r\n\t\t\t\t\tif (!this.rows.has(row[1])) continue\r\n\t\t\t\t\tthis.rows.get(row[1]).relative.set(column, Number(row[this.data.columns_[column]]) / max * 100)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tupdateScoreboardAndShow() {\r\n\t\tthis.updateScoreboard()\r\n\t\tthis.show()\r\n\t}\r\n\r\n\tupdateOnlineStatus() {\r\n\t\tfor (const [_, row] of this.rows) {\r\n\t\t\trow.status = this.data.getStatus(row.props.entry)\r\n\t\t}\r\n\t}\r\n\r\n\tupdateOnlineStatusAndShow() {\r\n\t\tthis.updateOnlineStatus()\r\n\t\tif (this.pagination) this.show()\r\n\t}\r\n\r\n\tupdateStats() {\r\n\t\tthis.updateScoreboard()\r\n\t\tthis.updateOnlineStatus()\r\n\t}\r\n\r\n\tupdateStatsAndShow() {\r\n\t\tthis.updateStats()\r\n\t\tthis.show()\r\n\t}\r\n\r\n\tchangeHideOffline(hideOffline: boolean) {\r\n\t\tthis.hideOffline = hideOffline\r\n\t\tif (this.pagination) {\r\n\t\t\tthis.updatePagination()\r\n\t\t\tthis.pagination.changePage(1)\r\n\t\t\tthis.show()\r\n\t\t}\r\n\t}\r\n\r\n\t// Re-display table contents\r\n\tshow() {\r\n\t\tthis.data.sort(this.sortColumn, this.descending)\r\n\t\tconst scores = this.getScores()\r\n\t\tconst [min, max] = this.pagination\r\n\t\t\t? this.pagination.getRange(scores.length)\r\n\t\t\t: [0, scores.length]\r\n\r\n\t\tconst rows: ijJSX.Node[] = []\r\n\t\trows.push(<Heading\r\n\t\t\tcolumns={this.columns ?? this.data.columns}\r\n\t\t\tshowSkins={this.showSkins}\r\n\t\t\tsortColumn={this.sortColumn}\r\n\t\t\tsortDescending={this.descending}\r\n\t\t\tonClick={this.thClick.bind(this)} />)\r\n\t\tfor (let i = min; i < max; i++) {\r\n\t\t\trows.push(this.rows.get(scores[i][1]))\r\n\t\t}\r\n\t\trender(<>{rows}</>, this.table)\r\n\t}\r\n\r\n\t// When a table header is clicked, sort by that header\r\n\t// (also called when the table header is activated through keyboard navigation)\r\n\tthClick(e: Event) {\r\n\t\tconst objective = (e.target as HTMLTableCellElement).getAttribute(\"data-objective\")\r\n\t\tthis.descending = (objective === this.sortColumn) ? !this.descending : true\r\n\t\tthis.sortColumn = objective\r\n\t\tthis.pagination?.changePage(1)\r\n\t\tthis.show()\r\n\r\n\t\t// Restore focused element (for keyboard navigation)\r\n\t\tfor (const th of this.table.getElementsByTagName(\"th\")) {\r\n\t\t\tif (th.innerText == objective) {\r\n\t\t\t\tth.focus()\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Replace single quotes by '&quot;' (html-escape)\r\n\tstatic quoteEscape = (string: string) => string.replace(/'/g, \"&quot;\")\r\n\r\n}\r\n","import { render } from \"@itsjavi/jsx-runtime\"\r\n\r\nexport default class Pagination {\r\n\tmaxPage: number\r\n\tdisplayCount: number\r\n\tcurrentPage: number\r\n\r\n\tparentElem: HTMLElement\r\n\tselectElem: HTMLSelectElement\r\n\tprevButton: HTMLButtonElement\r\n\tnextButton: HTMLButtonElement\r\n\r\n\tonPageChange: (page: number) => void\r\n\r\n\tconstructor(displayCount: number, elem: HTMLElement) {\r\n\t\tthis.displayCount = displayCount\r\n\t\tthis.currentPage = 1\r\n\r\n\t\tthis.parentElem = elem\r\n\t\tthis.selectElem = elem.querySelector(\"select.webstats-pagination[name=page]\")\r\n\t\tthis.prevButton = elem.querySelector(\"button.webstats-pagination[name=prev]\")\r\n\t\tthis.nextButton = elem.querySelector(\"button.webstats-pagination[name=next]\")\r\n\r\n\t\tthis.selectElem.addEventListener(\"change\",\r\n\t\t\t(e) => this.changePageAndCallback(Number((e.target as HTMLSelectElement).value)))\r\n\t\tthis.prevButton.addEventListener(\"click\",\r\n\t\t\t() => this.changePageAndCallback(this.currentPage - 1))\r\n\t\tthis.nextButton.addEventListener(\"click\",\r\n\t\t\t() => this.changePageAndCallback(this.currentPage + 1))\r\n\t}\r\n\r\n\tstatic create(displayCount: number, elem: HTMLElement) {\r\n\t\tconst content = <>\r\n\t\t\t<button className=\"webstats-pagination\" name=\"prev\">Prev</button>\r\n\t\t\t<select className=\"webstats-pagination\" name=\"page\" />\r\n\t\t\t<button className=\"webstats-pagination\" name=\"next\">Next</button>\r\n\t\t</>\r\n\t\trender(content, elem)\r\n\t\treturn new Pagination(displayCount, elem)\r\n\t}\r\n\r\n\tupdate(nEntries: number) {\r\n\t\tthis.maxPage = Math.ceil(nEntries / this.displayCount)\r\n\r\n\t\t// Hide all controls when there is only one page\r\n\t\tif (this.maxPage == 1) {\r\n\t\t\tthis.parentElem.classList.add(\"pagination-hidden\")\r\n\t\t} else {\r\n\t\t\tthis.parentElem.classList.remove(\"pagination-hidden\")\r\n\t\t}\r\n\r\n\t\t// Page selector\r\n\t\tif (this.selectElem) {\r\n\t\t\tthis.selectElem.innerHTML = \"\"\r\n\t\t\tfor (let i = 1; i <= this.maxPage; i++) {\r\n\t\t\t\tconst optionElem = document.createElement(\"option\")\r\n\t\t\t\toptionElem.innerText = String(i)\r\n\t\t\t\tthis.selectElem.append(optionElem)\r\n\t\t\t}\r\n\t\t\tthis.selectElem.value = String(this.currentPage)\r\n\t\t}\r\n\r\n\t\t// \"Prev\" button\r\n\t\tif (this.prevButton) this.prevButton.toggleAttribute(\"disabled\", this.currentPage <= 1)\r\n\r\n\t\t// \"Next\" button\r\n\t\tif (this.nextButton) this.nextButton.toggleAttribute(\"disabled\", this.currentPage >= this.maxPage)\r\n\t}\r\n\r\n\tchangePage(page: number) {\r\n\t\tpage = Math.max(1, Math.min(page, this.maxPage))\r\n\t\tthis.currentPage = page\r\n\r\n\t\tthis.selectElem.value = String(this.currentPage)\r\n\t\tif (this.prevButton) this.prevButton.toggleAttribute(\"disabled\", this.currentPage <= 1)\r\n\t\tif (this.nextButton) this.nextButton.toggleAttribute(\"disabled\", this.currentPage >= this.maxPage)\r\n\t}\r\n\r\n\tchangePageAndCallback(page: number) {\r\n\t\tthis.changePage(page)\r\n\t\tif (this.onPageChange) this.onPageChange(this.currentPage)\r\n\t}\r\n\r\n\tgetRange(nEntries?: number): [number, number] {\r\n\t\tconst min = (this.currentPage - 1) * this.displayCount\r\n\t\tconst max = (this.displayCount > 0)\r\n\t\t\t? Math.min(this.currentPage * this.displayCount, nEntries)\r\n\t\t\t: nEntries\r\n\t\treturn [min, max]\r\n\t}\r\n\r\n}\r\n","import Connection from \"./Connection\"\r\nimport Data from \"./Data\"\r\nimport Display from \"./Display\"\r\nimport { convertFormattingCodes } from \"./FormattingCodes\"\r\nimport Pagination from \"./Pagination\"\r\n\r\nexport { Connection, Data, Display, Pagination, convertFormattingCodes }\r\n\r\ndeclare global {\r\n\tinterface Window { webstats: WebStats }\r\n}\r\n\r\nexport type Direction = \"ascending\" | \"descending\"\r\n\r\nexport type TableConfig = {\r\n\tname?: string\r\n\tcolumns?: string[]\r\n\tsortColumn?: string\r\n\tsortDirection?: Direction\r\n}\r\n\r\nexport type WebStatsConfig = {\r\n\t// Either one of these\r\n\thost?: string\r\n\tconnection?: Connection\r\n\r\n\t// Either one of these\r\n\ttableParent?: HTMLTableElement\r\n\ttables?: { [key: string]: { table: HTMLTableElement, pagination?: HTMLElement } }\r\n\r\n\tupdateInterval?: number\r\n\tshowSkins?: boolean\r\n\tdisplayCount?: number\r\n}\r\n\r\nexport default class WebStats {\r\n\tstatic CONNECTION_ERROR_MSG = \"No connection to server. Maybe the server is offline, or the 'host' setting in index.html is incorrect.\"\r\n\r\n\tdisplays: Display[]\r\n\tconnection: Connection\r\n\tdata: Data\r\n\tupdateInterval: number\r\n\tinterval: number\r\n\r\n\tloadingElem?: HTMLElement\r\n\terrorElem?: HTMLElement\r\n\r\n\tconstructor(config: WebStatsConfig) {\r\n\t\tthis.displays = []\r\n\t\tthis.connection = config.connection ?? Connection.json(config.host)\r\n\t\tthis.updateInterval = config.updateInterval ?? 10000\r\n\r\n\t\t// Status HTML elements\r\n\t\tconst optionHideOffline = document.querySelector(\"input.webstats-option#hide-offline\") as HTMLInputElement\r\n\t\tconst statusElem = document.querySelector(\".webstats-status\")\r\n\t\tthis.loadingElem = statusElem?.querySelector(\".webstats-loading-indicator\")\r\n\t\tthis.errorElem = statusElem?.querySelector(\".webstats-error-message\")\r\n\t\tthis.setLoadingStatus(true)\r\n\r\n\t\t// Get data and init\r\n\t\tconst statsPromise = this.connection.getStats()\r\n\t\tconst tableConfigsPromise = this.connection.getTables()\r\n\t\tPromise.all([statsPromise, tableConfigsPromise])\r\n\t\t\t.then(\r\n\t\t\t\t([stats, tableConfigs]) => this.init(stats, tableConfigs, config, optionHideOffline.checked),\r\n\t\t\t\tthis.catchError(WebStats.CONNECTION_ERROR_MSG, config)\r\n\t\t\t)\r\n\t\t\t.catch(this.catchError(undefined, config))\r\n\r\n\t\t// Get saved toggles from cookies\r\n\t\tconst cookies = document.cookie.split(\"; \") ?? []\r\n\t\tcookies.filter(str => str.length > 0).forEach(cookie => {\r\n\t\t\tconst [property, value] = cookie.match(/[^=]+/g)\r\n\t\t\tdocument.documentElement.classList.toggle(property, value == \"true\")\r\n\t\t\tconst el = document.querySelector(\"input.webstats-option#\" + property) as HTMLInputElement\r\n\t\t\tif (el) el.checked = (value == \"true\")\r\n\t\t})\r\n\r\n\t\t// On config option toggle, set the html element's class and store cookie\r\n\t\tdocument.querySelectorAll(\"input.webstats-option\").forEach(el =>\r\n\t\t\tel.addEventListener(\"change\", () => {\r\n\t\t\t\tdocument.documentElement.classList.toggle(el.id, (el as HTMLInputElement).checked)\r\n\t\t\t\t// Set a cookie which expires in 10 years\r\n\t\t\t\tdocument.cookie = `${el.id}=${(el as HTMLInputElement).checked}; max-age=${60 * 60 * 24 * 365 * 10}; SameSite=Lax`\r\n\t\t\t})\r\n\t\t)\r\n\r\n\t\toptionHideOffline?.addEventListener(\"change\", (e) => {\r\n\t\t\tthis.displays.forEach(display => display.changeHideOffline(optionHideOffline.checked))\r\n\t\t})\r\n\r\n\t\twindow.webstats = this\r\n\t}\r\n\r\n\tinit(data, tableConfigs: TableConfig[] | undefined, config: WebStatsConfig, hideOffline: boolean) {\r\n\t\tif (config.tables) {\r\n\t\t\tfor (const tableName in config.tables) {\r\n\t\t\t\tconst tableConfig = tableConfigs\r\n\t\t\t\t\t? tableConfigs.find(tc => (tc.name ?? \"\") == tableName)\r\n\t\t\t\t\t: { colums: data.scoreboard.columns as string[] } as TableConfig\r\n\t\t\t\tif (tableConfig) this.addTableManual(config, tableConfig)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (tableConfigs) {\r\n\t\t\t\tfor (const tableConfig of tableConfigs) {\r\n\t\t\t\t\tthis.addTableAutomatic(config, tableConfig)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.addTableAutomatic(config, { colums: data.scoreboard.columns as string[] } as TableConfig)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.data = new Data(data)\r\n\t\tthis.displays.forEach(display => {\r\n\t\t\tdisplay.init(this.data)\r\n\t\t\tdisplay.hideOffline = hideOffline\r\n\t\t\tdisplay.show()\r\n\t\t})\r\n\r\n\t\t// Set update interval\r\n\t\tif (this.updateInterval > 0) {\r\n\t\t\tthis.startUpdateInterval(true)\r\n\t\t\tdocument.addEventListener(\"visibilitychange\", () => document.hidden\r\n\t\t\t\t? this.stopUpdateInterval() : this.startUpdateInterval())\r\n\t\t}\r\n\r\n\t\tthis.setLoadingStatus(false)\r\n\t}\r\n\r\n\tupdate() {\r\n\t\t// When nobody is online, assume scoreboard does not change\r\n\t\tif (this.data.nOnline > 0) {\r\n\t\t\tthis.connection.getStats().then(data => {\r\n\t\t\t\tthis.data.setStats(data)\r\n\t\t\t\tthis.displays.forEach(display => display.updateStatsAndShow())\r\n\t\t\t}).catch(this.catchError(WebStats.CONNECTION_ERROR_MSG))\r\n\t\t} else {\r\n\t\t\tthis.connection.getOnline().then(data => {\r\n\t\t\t\tthis.data.setOnlineStatus(data)\r\n\t\t\t\tthis.displays.forEach(display => display.updateOnlineStatusAndShow())\r\n\t\t\t}).catch(this.catchError(WebStats.CONNECTION_ERROR_MSG))\r\n\t\t}\r\n\t}\r\n\r\n\tstartUpdateInterval(first?: boolean) {\r\n\t\tthis.interval = setInterval(this.update.bind(this) as TimerHandler, this.updateInterval)\r\n\t\tif (!first) this.update()\r\n\t}\r\n\r\n\tstopUpdateInterval() {\r\n\t\tclearInterval(this.interval)\r\n\t}\r\n\r\n\taddTableManual(config: WebStatsConfig, tableConfig: TableConfig) {\r\n\t\tlet pagination: Pagination\r\n\t\tif (config.displayCount > 0 && config.tables[tableConfig.name ?? \"\"].pagination) {\r\n\t\t\tconst paginationParent = config.tables[tableConfig.name ?? \"\"].pagination\r\n\t\t\tpagination = new Pagination(config.displayCount, paginationParent)\r\n\t\t}\r\n\t\tthis.displays.push(new Display(\r\n\t\t\t{ ...config, table: config.tables[tableConfig.name ?? \"\"].table, pagination: pagination, serverIconURL: this.connection.serverIcon },\r\n\t\t\ttableConfig\r\n\t\t))\r\n\t}\r\n\r\n\taddTableAutomatic(config: WebStatsConfig, tableConfig: TableConfig) {\r\n\t\tconst headerElem = (config.tableParent as HTMLElement)\r\n\t\t\t.appendChild(document.createElement(\"div\"))\r\n\t\theaderElem.classList.add(\"webstats-tableheading\")\r\n\t\tif (tableConfig.name) {\r\n\t\t\theaderElem.innerText = tableConfig.name\r\n\t\t\theaderElem.setAttribute(\"webstats-table\", tableConfig.name)\r\n\t\t}\r\n\r\n\t\tlet pagination: Pagination\r\n\t\tif (config.displayCount > 0) {\r\n\t\t\tconst paginationControls = headerElem.appendChild(document.createElement(\"span\"))\r\n\t\t\tpaginationControls.classList.add(\"webstats-pagination\")\r\n\t\t\tpagination = Pagination.create(config.displayCount, paginationControls)\r\n\t\t}\r\n\r\n\t\tconst tableElem = (config.tableParent as HTMLElement)\r\n\t\t\t.appendChild(document.createElement(\"table\"))\r\n\t\tif (tableConfig.name) tableElem.setAttribute(\"webstats-table\", tableConfig.name)\r\n\t\tthis.displays.push(new Display(\r\n\t\t\t{ ...config, table: tableElem, pagination: pagination, serverIconURL: this.connection.serverIcon },\r\n\t\t\ttableConfig\r\n\t\t))\r\n\t}\r\n\r\n\tsetLoadingStatus(loading: boolean) {\r\n\t\tif (!this.loadingElem) return\r\n\t\tthis.loadingElem.style.display = loading ? \"inline\" : \"none\"\r\n\t}\r\n\r\n\tsetErrorMessage(msg: string, config?: WebStatsConfig) {\r\n\t\tif (this.errorElem) this.errorElem.innerText = msg\r\n\t\telse {\r\n\t\t\tconst spanElem = document.createElement(\"span\")\r\n\t\t\tspanElem.innerText = msg\r\n\t\t\tspanElem.classList.add(\"webstats-error-message\")\r\n\t\t\tif (config?.tableParent) {\r\n\t\t\t\tconfig.tableParent.appendChild(spanElem)\r\n\t\t\t} else if (config?.tables) {\r\n\t\t\t\tfor (const tablename in config.tables) {\r\n\t\t\t\t\tif (config.tables[tablename].table) config.tables[tablename].table.appendChild(spanElem)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcatchError(msg?: string, config?: WebStatsConfig) {\r\n\t\tconst self = this\r\n\t\treturn e => {\r\n\t\t\tconsole.error(e)\r\n\t\t\tif (msg) console.warn(msg)\r\n\t\t\tself.setErrorMessage(msg ?? e, config)\r\n\t\t\tself.setLoadingStatus(false)\r\n\t\t\tself.stopUpdateInterval()\r\n\t\t}\r\n\t}\r\n\r\n}\r\n"],"names":["Connection","all","scores","online","tables","serverIcon","constructor","this","static","host","protocol","startsWith","getStats","async","fetch","json","scoreboard","Promise","getOnline","getScoreboard","then","response","catch","getTables","Data","columns","players","columns_","units","skins","playernames","data","setStats","entries","nOnline","Object","keys","length","isOnline","player","isAFK","isOffline","getStatus","isCurrentPlayer","includes","setScoreboard","sort","filter","entryName","entry","push","columnName","Player","forEach","val","idx","setOnlineStatus","setPlayernames","setUnits","setSkins","isPlayerOrServer","isNonemptyEntry","bind","Intl","Collator","compare","isNonemptyObjective","by","descending","collator","undefined","sensitivity","numeric","a_row","b_row","_","score","match","isBedrockPlayer","BEDROCK_PREFIX","objective","substring","replaceAll","obj","predicate","fromEntries","v","mapper","map","k","e","assign","t","arguments","n","r","prototype","hasOwnProperty","call","apply","children","o","type","key","props","l","indexOf","Array","concat","text","Fragment","TextNode","customAttributes","element","render","window","_globalThis","setGlobalThis","renderDOM","s","i","c","a","document","ownerDocument","createTextNode","appendChild","u","createDocumentFragment","createElement","jsxComponent","p","d","className","isArray","join","Function","setAttribute","toLowerCase","h","onWillMount","replaceChildren","onDidMount","COLOUR_CODES","FORMATTING_CODES","FORMATTING_CODE_REGEX","convertFormattingCode","part","format","colour","classes","colourType","_jsx","style","parseFormattingCode","code","prev","matches","slice","convertFormattingCodes","value","parts","firstIdx","matchAll","next","index","parseFormattingCodes","timeUnits","distanceUnits","dateUnits","itemUnits","percentageUnits","offsets","milliseconds","ms","ticks","seconds","minutes","min","hours","days","millimetres","millimeters","mm","centimetres","centimeters","cm","blocks","metres","meters","m","kilometres","kilometers","km","items","items16","percent","autoConvertUnits","source","unit","inSeconds","date","Date","Math","floor","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","String","padStart","convertTimeUnit","Number","inBlocks","convertDistanceUnit","toLocaleString","convertDateUnit","inItems","stackSize","stacks","convertItemUnit","convertPercentageUnit","isNaN","columnClass","column","sortColumn","sortDescending","onKeyDown","target","click","transformEntryName","transformBedrockPlayername","getSkin","skin","Heading","showSkins","onClick","_jsxs","colSpan","tabIndex","Avatar","title","src","alt","Cell","relative","PlayerCell","status","name","_Fragment","Row","Component","values","Map","super","get","Display","table","pagination","serverIconURL","hideOffline","rows","sortDirection","onPageChange","page","show","init","updatePagination","getEntries","set","updateStats","entriesHere","some","getScores","scoresHere","row","has","update","updateScoreboard","max","isNumberColumn","updateScoreboardAndShow","updateOnlineStatus","updateOnlineStatusAndShow","updateStatsAndShow","changeHideOffline","changePage","getRange","thClick","getAttribute","th","getElementsByTagName","innerText","focus","string","replace","Pagination","maxPage","displayCount","currentPage","parentElem","selectElem","prevButton","nextButton","elem","querySelector","addEventListener","changePageAndCallback","content","nEntries","ceil","classList","add","remove","innerHTML","optionElem","append","toggleAttribute","WebStats","displays","connection","updateInterval","interval","loadingElem","errorElem","config","optionHideOffline","statusElem","setLoadingStatus","statsPromise","tableConfigsPromise","stats","tableConfigs","checked","catchError","CONNECTION_ERROR_MSG","cookie","split","str","property","documentElement","toggle","el","querySelectorAll","id","display","webstats","tableName","tableConfig","find","tc","colums","addTableManual","addTableAutomatic","startUpdateInterval","hidden","stopUpdateInterval","first","setInterval","clearInterval","paginationParent","headerElem","tableParent","paginationControls","create","tableElem","loading","setErrorMessage","msg","spanElem","tablename","self","console","error","warn"],"mappings":"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"}